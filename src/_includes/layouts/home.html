{% set opengraphUrl = site.url + '/images/og/home.jpg' %}

{%- extends "layouts/base.html" -%}

{%- block preload -%}
  <link rel="preload" href="/scripts/scroll.js" as="script" fetchpriority="high">
  <link rel="preload" href="/scripts/lite-yt-embed.js" as="script" fetchpriority="high">
{%- endblock -%}


{%- block content -%}
  {% include "partials/intro.html" %}
  {% include "partials/who-are-we.html" %}
  {% include "partials/why-choose-us.html" %}
  {% include "partials/features.html" %}
  {% include "partials/programs.html" %}
  {% include "partials/how-does-it-work.html" %}
  {% include "partials/testimonial.html" %}
  {% include "partials/videos.html" %}
  {% include "partials/contact-us.html" %}
  {{ content | safe }}
{%- endblock -%}

<!-- TODO: check the defer attribute on the scripts -->
{%- block bodyScripts -%}
  <script>
    function toggleDisclosure() {
      if (this.getAttribute("aria-expanded") == "false") {
        this.previousElementSibling.setAttribute('data-state', 'visible');
        this.setAttribute("aria-expanded", "true");
        this.innerText = "View Less";
      } 
      else {
        this.previousElementSibling.setAttribute('data-state', 'hidden');
        this.setAttribute("aria-expanded", "false");
        this.innerText = "View More";
      }
    }
    const disclosureWidget = document.querySelectorAll('.disclosure-widget');
    const viewAllButton = document.querySelectorAll('.view-all');

    disclosureWidget.forEach( x=> x.setAttribute('data-state', 'hidden'));
    viewAllButton.forEach( x=> x.addEventListener("click", toggleDisclosure));
  </script>
  <script src="/scripts/scroll.js" defer async></script>
  <script src="/scripts/lite-yt-embed.js" defer async></script>
{%- endblock -%}
